tvtime-plex-scrobbler
=====================

The original source [tvshowtime-plex-scrobbler](https://github.com/tvshowtime/tvshowtime-plex-scrobbler/) hasn't gotten any updates, is requires you to run on the same machine as Plex server and requires to set Plex logging to `DEBUG` level, which causes a lot of data.

tvtime-plex-scrobbler provides a set of scripts that allow you to scrobble played episodes items to TVShow Time from the Plex Media Server application. tvtime-plex-scrobbler was built to run across platforms, while it has not yet been tested on Windows, it *should* work.

A few points

  - tvtime-plex-scrobbler is an out of process tool. Meaning it is not a Plex Media Server plug-in. This tool runs separately of your Plex Media Server.
  - Uses python standard library. Python 2.7 is the only requirement to run this application
  - Uses Plex API to retrieve the recently watched episodes
  - Does not differentiate between clients. Meaning all media played, will be scrobbled.

Installation
----

* Install Python 2.7.x from https://www.python.org/download/ . Ensure you enable the option to install Python to the system/site path.
* Download the zip of tvtime-plex-scrobbler from https://github.com/quekky/tvtime-plex-scrobbler/archive/master.zip .
* unzip archive to a location

Configuration
-----------

The tvtime-plex-scrobbler configuration file (plex_tvst_scrobbler.conf) is in the **conf** directory. The following configuration values are available.

If you're running Plex Media Server on a Linux based operating system, things should work out of the box.

```
[plex-tvst-scrobbler]
# REQUIRED: mediaserver_url is the location of the http service exposed by Plex Media Server
# the default values should be 'ok', assuming you're running the plex scrobble
# script from the same server as your plex media server
mediaserver_url = http://localhost:32400

# REQUIRED: Where do you wish to write the plex-tvst-scrobbler log file.
log_file = /tmp/plex_tvst_scrobbler.log

# OPTIONAL: Where do you wish to write the token used for authorizing access to
# you TVShow Time account
session = /tmp/plex_tvst_scrobbler_session_key

# OPTIONAL: Where do you wish to write the access token used for authenticating
# to the plex API
plex_access_token_location = /tmp/plex_tvst_scrobbler_plex_access_token

# OPTIONAL: mediaserver_log_location references the log file location of the plex media server
# the default under /var/lib/... is the default install of plex media server on
# a Linux system. You may wish to change this value to reference your OS install.
# https://support.plex.tv/hc/en-us/articles/200250417-Plex-Media-Server-Log-Files
#mediaserver_log_location = /path/to/plex/media/server/log


```

Running
--------

On first run you will be prompted to authenticate and grant access to your Plex and TV Time account. Visit the URL generated by tvtime-plex-scrobbler and follow the prompts to grant access to the application.

Example.


```
$ python tvtime-plex-scrobbler.py

== Requesting Requesting access token from plex.tv ==
Enter plex.tv username:
Enter plex.tv password:
== Requesting tvshowtime.com auth ==

Please do the following to authorize the scrobbler:

1/ Connect on https://www.tvtime.com/activate
2/ Enter the code: xxxx-xxxx

Have you authorized me [y/N] :

```


Once this is complete, please run the program again to sync. The program will exit once it have sync finish.

```
$ python tvtime-plex-scrobbler.py
```

You can use scheduler or cronjob to schedule the program to run every hour.

Troubleshooting & Known Issues
-------------

* If you're experiencing authentication issues (appearing in plex_tvst_scrobbler.log), remove the session files and run the program to setup the authentication.

Thanks
------

The project was forked from https://github.com/sportsreport2/tvshowtime-plex-scrobbler and edited.
